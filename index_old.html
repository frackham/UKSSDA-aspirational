<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title> {{ app_title }} </title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width">

        <link rel="stylesheet" href="css/normalize.min.css">
        <link rel="stylesheet" href="css/main.css">
		    <link rel="stylesheet" href="/stylesheet/style.css" /> 
        <link rel="stylesheet" href="css/jquery.jqplot.min.css" />

        
	      
        <script src="js/vendor/modernizr-2.6.1-respond-1.1.0.min.js"></script>
    </head>
    <body>
        <!--[if lt IE 7]>
            <p class="chromeframe">You are using an outdated browser. <a href="http://browsehappy.com/">Upgrade your browser today</a> or <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to better experience this site.</p>
            <script src="excanvas.js"></script>
        <![endif]-->

        <div class="header-container">
            <header class="wrapper clearfix">
                <h1 class="title">{{ app_title }} </h1>
                <nav id="nav-options">
                    <ul>
                        <li id="global-tour"><a href="#">Tour</a></li>
                        <li id="global-help"><a href="#">Help</a></li>
                        <li id="global-settings"><a href="#">Settings</a></li>
                        <li id="global-login_logout"><a href="#"> {{ url_linktext }} </a></li>
                    </ul>
                </nav>
                <p id="headerstatus">Anonymised Mode</p>
            </header>
        </div>

    	<div id="nav-wrapper">
            <nav id="nav-primary">
                <ul>
                	<!-- POPULATE: Jinja2 <-- (for item in userNavItems) -->
                    <li>{{ user_name }}  </li>
                	  <li><a href="#">Admin</a>
                    	<ul>
                    		<li class="primarynav" id="admin-schooldetails">    <a href="#">School Details</a></li>
                    		<li class="primarynav" id="admin-datasetexplorer">  <a href="#">Dataset Explorer</a></li> <!-- Visual view of datasets. Add datasets from here (including descriptive only datasets). -->
                    		<li class="primarynav" id="admin-datasetvalidation"><a href="#">Dataset Validation(?)</a></li>
                    		<li class="primarynav" id="admin-usersetup">        <a href="#">User Setup</a></li>
                    	</ul>	
                    </li>
                    
                    <li id="buffernav"><a href="#">- - - - -</a></li>
                    <li><a href="#">School</a>
                    	<ul>
                    		<li class="primarynav" id="school-context"><a href="#">School Context</a></li>
                    		<li class="primarynav" id="school-temp">   <a href="#">Other Analyses</a></li>
                    	</ul>	
                    </li>
                    <li><a href="#">Students</a>
                    	<ul>
                    		<li class="primarynav" id="students-summary"><a href="#">Students Summary</a></li>
                    		<li class="primarynav" id="students-temp">   <a href="#">Other Analyses</a></li>
                    	</ul>	
                    </li>
                    <li><a href="#">Attendance</a>
                    	<ul>
                    		<li class="primarynav" id="attendance-summary">             <a href="#">Attendance Summary</a></li>
                    		<li class="primarynav" id="attendance-groups">              <a href="#">Attendance within Groups</a></li>
                    		<li class="primarynav" id="attendance-attainmentthresholds"><a href="#">Attendance against Thresholds</a></li>
                    		<li class="primarynav" id="attendance-temp">                <a href="#">Other Analyses</a></li>
                    	</ul>	
                    </li>
                    <li><a href="#">Behaviour</a>
                    	<ul>
                    		<li class="primarynav" id="behaviour-summary"><a href="#">Behaviour Summary</a></li>
                    		<li class="primarynav" id="behaviour-temp">   <a href="#">Other Behaviour Analyses</a></li>
                    	</ul>	
                    </li>
                    <li><a href="#">Assessment</a>
                    	<ul>
                    		<li class="primarynav" id="assessment-summary"><a href="#">Assessment Summary</a></li>
                    		<li class="primarynav" id="assessment-temp">   <a href="#">Other Assessment Analyses</a></li>
                    	</ul>	
                    </li>
                    <li><a href="#">Curriculum</a>
                    	<ul>
                    		<li class="primarynav" id="curriculum-summary"><a href="#">Curriculum Summary</a></li>
                    		<li class="primarynav" id="curriculum-temp">   <a href="#">Other Curriculum Analyses</a></li>
                    	</ul>	
                    </li>
                 <li><a href="#">Developer</a>
                    	<ul>
	                    	<li class="primarynav" id="dev-testclick">              <a href="#">School List</a></li>
	                    	<li class="primarynav" id="dev-ajaxtest">               <a href="#">Ajaxtest</a></li>
	                    	<li class="primarynav" id="dev-crudtest">               <a href="#">CRUD test (Data Store)</a></li>
	                    	<li class="primarynav" id="dev-qanparse">               <a href="#">QAN parse</a></li>
	                    	<li class="primarynav" id="dev-edubasescrape">          <a href="#">Edubase scrape</a></li>
	                    	<li class="primarynav" id="dev-addschool">              <a href="#">Add School</a></li>
	                    	<li class="primarynav" id="dev-showschools">            <a href="#">Show Schools</a></li>
	                    	<li class="primarynav" id="dev-addstudenttoschool">     <a href="#">Add Student to (Fixed) School</a></li>
	                    	<li class="primarynav" id="dev-showstudents">           <a href="#">Show Students of Schools</a></li>
	                    	<li class="primarynav" id="dev-analysisloaderdemo">     <a href="#">Analysis Loader Demo</a></li>
                    	</ul>	
                    </li>
                    <li><a href="#">Extension Demos</a>
                    	<ul>
	                    	<li class="primarynav" id="extension-location"><a href="#">Location</a></li>
	                    	<li class="primarynav" id="extension-news">    <a href="#">News</a></li>
	                    	<li class="primarynav" id="extension-ofsted">  <a href="#">OFSTED</a></li>
                    	</ul>	
                    </li>
                    <li><a href="#">Fragments in Progress</a>
                    	<ul>
	                    	<li class="primarynav" id="fragment-studentcount"><a href="#">Count(School)</a></li>
                    	</ul>	
                    </li> 
                    <li id="documents"><a href="#">Documents</a></li>
                </ul>
            </nav>
        </div>
        
        <div class="main-container">
            <div id="loader"><img src="/img/temp_hourglass.gif" /></div>
            <div id="maincontent" class="main wrapper clearfix">
                	<!-- POPULATE: Jinja2 <-- (show analysiscontent) -->
                <article>
                    <!-- <header>
                        <h1>article header h1</h1>
                        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aliquam sodales urna non odio egestas tempor. Nunc vel vehicula ante. Etiam bibendum iaculis libero, eget molestie nisl pharetra in. In semper consequat est, eu porta velit mollis nec.</p>
                    </header>
                    <section>
                        <h2>article section h2</h2>
                        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aliquam sodales urna non odio egestas tempor. Nunc vel vehicula ante. Etiam bibendum iaculis libero, eget molestie nisl pharetra in. In semper consequat est, eu porta velit mollis nec. Curabitur posuere enim eget turpis feugiat tempor. Etiam ullamcorper lorem dapibus velit suscipit ultrices. Proin in est sed erat facilisis pharetra.</p>
                    	<img src="img/qrcode.png" />
                    </section>
                    <section>
                        <h2>article section h2</h2>
                        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aliquam sodales urna non odio egestas tempor. Nunc vel vehicula ante. Etiam bibendum iaculis libero, eget molestie nisl pharetra in. In semper consequat est, eu porta velit mollis nec. Curabitur posuere enim eget turpis feugiat tempor. Etiam ullamcorper lorem dapibus velit suscipit ultrices. Proin in est sed erat facilisis pharetra.</p>
                    </section>
                    <section>
                        <h2>article section h2</h2>
                        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aliquam sodales urna non odio egestas tempor. Nunc vel vehicula ante. Etiam bibendum iaculis libero, eget molestie nisl pharetra in. In semper consequat est, eu porta velit mollis nec. Curabitur posuere enim eget turpis feugiat tempor. Etiam ullamcorper lorem dapibus velit suscipit ultrices. Proin in est sed erat facilisis pharetra.</p>
                    </section>
                    <section>
                        <h2>article section h2</h2>
                        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aliquam sodales urna non odio egestas tempor. Nunc vel vehicula ante. Etiam bibendum iaculis libero, eget molestie nisl pharetra in. In semper consequat est, eu porta velit mollis nec. Curabitur posuere enim eget turpis feugiat tempor. Etiam ullamcorper lorem dapibus velit suscipit ultrices. Proin in est sed erat facilisis pharetra.</p>
                    </section>
                    <section>
                        <h2>article section h2</h2>
                        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aliquam sodales urna non odio egestas tempor. Nunc vel vehicula ante. Etiam bibendum iaculis libero, eget molestie nisl pharetra in. In semper consequat est, eu porta velit mollis nec. Curabitur posuere enim eget turpis feugiat tempor. Etiam ullamcorper lorem dapibus velit suscipit ultrices. Proin in est sed erat facilisis pharetra.</p>
                    </section>
                    <section>
                        <h2>article section h2</h2>
                        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aliquam sodales urna non odio egestas tempor. Nunc vel vehicula ante. Etiam bibendum iaculis libero, eget molestie nisl pharetra in. In semper consequat est, eu porta velit mollis nec. Curabitur posuere enim eget turpis feugiat tempor. Etiam ullamcorper lorem dapibus velit suscipit ultrices. Proin in est sed erat facilisis pharetra.</p>
                    </section>
                    <footer>
                        <h3>article footer h3</h3>
                        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aliquam sodales urna non odio egestas tempor. Nunc vel vehicula ante. Etiam bibendum iaculis libero, eget molestie nisl pharetra in. In semper consequat est, eu porta velit mollis nec. Curabitur posuere enim eget turpis feugiat tempor.</p>
                    </footer>-->
                    <div id="chart1" class="chart"></div>
                </article>
            </div> <!-- #main -->
        </div> <!-- #main-container -->

        <div id="footer-container">
            <footer id="footerwrapper">
                <ul id="footerlist">
                 <li><a href="#">Fraser Rackham - K1065630</a></li>
                 <li><a href="mailto:k1065630@kingston.ac.uk">Mail</a></li>
                 <li><a href="#">Kingston University</a></li>
                 <li><a href="#">Google App Engine</a></li>
                 <li><a href="#">HTML 5 Boilerplate	</a></li>
                </ul>
            </footer>
            <footer id="developer-links">
                <ul id="devlist">
                 <li><a href="#">Data for Schools Admin</a></li>
                 <li><a href="https://appengine.google.com/">App Engine Login (MUST USE CORRECT LOGIN EMAIL!)</a></li>
                 <li><a href="https://developers.google.com/appengine/">App Engine Developers Home</a></li>
                 <li><a href="http://fr-testapp.appspot.com/">This App Live</a></li>
                 <li><a href="https://developers.google.com/appengine/">GApps Docs</a></li>
                 <li><a href="http://docs.jquery.com/">jQuery Docs</a></li>
                 <li><a href="http://api.jqueryui.com">jQueryUI Docs</a></li>
                 <li><a href="http://www.jqplot.com/docs/files/usage-txt.html">jqPlot Docs</a></li>
                </ul>
            </footer>
        </div>

	    <!-- scripts and fallback to local -->
	    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
      <script>window.jQuery || document.write('<script src="js/vendor/jquery-1.8.2.min.js"><\/script>')</script>
 		  <script src="//code.jquery.com/ui/1.9.0/jquery-ui.js"></script>
	    <script>window.jQuery.ui || document.write('<script src="js/vendor/jquery-ui.js"><\/script>')</script>
      <script>window.jQuery.jqplot || document.write('<script src="js/vendor/jquery.jqplot.min.js"><\/script>')</script>
	    <!-- end scripts and fallback to local -->
	  
	  <!-- jqPlot (Excanvas in header)-->  
    <script src="js/vendor/jquery.jqplot.min.js"></script>
    <!-- TEMPORARY: These should be loaded dependent on the plot...possible dynamically? Or do we need an aggregated library? -->
    <script src="js/vendor/jqplotplugins/jqplot.canvasTextRenderer.min.js"></script>
    <script src="js/vendor/jqplotplugins/jqplot.canvasAxisLabelRenderer.min.js"></script>
    <script src="js/vendor/jqplotplugins/jqplot.canvasAxisTickRenderer.min.js"></script>
    <script src="js/vendor/jqplotplugins/jqplot.dateAxisRenderer.min.js"></script>
    <script src="js/vendor/jqplotplugins/jqplot.pointLabels.min.js"></script>
    <script src="js/vendor/jqplotplugins/jqplot.highlighter.min.js"></script>
    <script src="js/vendor/jqplotplugins/jqplot.canvasOverlay.min.js"></script>
    <script src="js/vendor/jqplotplugins/jqplot.trendline.min.js"></script>
            
   
		<!-- 
        <script>
            var _gaq=[['_setAccount','UA-XXXXX-X'],['_trackPageview']];
            (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
            g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
            s.parentNode.insertBefore(g,s)}(document,'script'));
        </script>
        -->
         <script type="text/javascript">// <![CDATA[
		  $(document).ready(function() {
		    //alert(':/');
			
		    
		    
		  if (jQuery) {  
				alert('jQuery is loaded!');  
			  jsonstudents = [{"id":"1","name":"Bob","ncyear":"7"},{"id":"2","name":"Brian","ncyear":"9"},{"id":"3","name":"Betty","ncyear":"7"},{"id":"4","name":"Jane","ncyear":"8"},{"id":"5","name":"James","ncyear":"9"},{"id":"6","name":"Jim","ncyear":"10"},{"id":"7","name":"Chris","ncyear":"11"},{"id":"8","name":"Keiran","ncyear":"11"},{"id":"9","name":"Karen","ncyear":"10"},{"id":"10","name":"Jethro","ncyear":"9"}];	
				alert(jsonstudents);
				//for stud in jsonstudents {
  			//  alert(stud);	
				//}
			}  
			if (jQuery.ui) {   
				// UI loaded 
				alert('jQueryUI is loaded!');  
				$( "#nav-primary ul" ).menu();
				//$( "#testarea" ).accordion();
				//alert($("#nav-primary").height());
				$("#nav-primary").height($("#maincontent.main.wrapper.clearfix").height());
				//alert($("#nav-primary").height());
				//alert('!');  
				
			}


			if (jQuery.jqplot) {
  			//console.log("JQPlot loaded");
  			//USe http://docs.roxen.com/pike/7.0/tutorial/strings/sprintf.xml for working out sprintf notation.
				alert('JQPlot is loaded!'); 
				var data1 = [["26/08/2009", 45], ["26/08/2010", 56], ["26/08/2011", 67], ["26/08/2012", 68]];
  		  var plot1 = $.jqplot ('chart1', [data1], {
  		      //axesDefaults: { labelRenderer: $.jqplot.CanvasAxisLabelRenderer      },
  		      title: '% attaining 5A*-C including English and Maths',
            seriesDefaults:{
              pointLabels: { show: false },
              location: 's'
            },
  		      
            axes: { 
    		      xaxis: { 
      		      label: "Year", 
      		      pad: 1.2, 
      		      renderer: $.jqplot.DateAxisRenderer,
      		      labelRenderer: $.jqplot.CanvasAxisLabelRenderer,
                tickRenderer: $.jqplot.CanvasAxisTickRenderer,
                tickOptions: {
                    // labelPosition: 'middle',
                    angle: 90
                    //formatString: '%b %#y'
                  }
      		      },
    		      yaxis: { label: "%5AC+EM", 
    		               min: 0, 
    		               max: 100,
    		               tickInterval: 10,
                       tickOptions:{
                        formatString:'%.0f'
                          } 
                },
  		      }, 
  		      highlighter: {        
    		      show: true,        
    		      sizeAdjust: 7.5,     
    		      },      
    		    cursor: {        
      		    show: false      
      		    }
		      }
  		  );
			} 
			else {
  			//Alternative rendering here.
				alert('JQPlot is not loaded!'); 
  			//console.log("JQPlot not loaded");
  			}
			
			if (typeof window.CanvasRenderingContext2D == 'undefined' && typeof G_vmlCanvasManager == 'undefined') {
         alert("ExCanvas not loaded!");
      } else {
         alert("ExCanvas loaded!");  
      }
			//THESE # .click functions NEED GENERALISING INTO A CLASS THAT TAKES A PARAMETER!
			
			$('.primarynav').click(function (e) {
				e.stopPropagation(); //Prevents double call after function from bubbling to li after a.
				currentItem = $(this).attr("id"); //Note MUST be $(this) for jQuery, and not simply 'this'.
				$('#loader').show();
				//Temp:
				//alert('clicked on ' + currentItem);
				currentSection = currentItem.split("-")[0];
				currentSpecific = currentItem.split("-")[1];
				currentGetURI = '/' + currentSection + '/' + currentSpecific;
				alert(currentGetURI);
				//Will become: (where '/developer/schoollist' --> split of currentItem.
				$.get(currentGetURI, function(data) {
				  $('#maincontent').html(data);
				});
				$('#loader').hide();
				
			});
			
		    
		    $('#dev-crudtest').click(function (e) {    
			    e.stopPropagation(); //Prevents double call after function from bubbling to li after a.
				  $.get('/developer/crudtest', function(data) {
				  $('#maincontent').html(data);
				 });
		    });	

			
			 
		  });
		// ]]></script>
		<!-- 
		
		$.ajax({
					  url: "/developer/schoollist",
					  context: document.body
					})
					  .done(function() { 
			  			//$('#maincontent').innerHTML("done");
			  			alert('Success!');})
					  .fail(function() { alert("error"); })
    				  .always(function() { alert("complete"); });;
		
		
		-->
    </body>
</html>
